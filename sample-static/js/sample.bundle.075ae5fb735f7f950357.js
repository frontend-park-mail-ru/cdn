webpackJsonp([0],{118:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(138),s=r(a),u=function(){function e(){return i(this,e),e.__instance?e.__instance:(this.routes=[],this.activeRoute=null,this.history=window.history,void(e.__instance=this))}return o(e,[{key:"addRoute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new s.default(e,t,n);return r.setRouter(this),this.routes.push(r),this}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.onpopstate=function(e){var t=e.state,n=window.location.pathname;this.onroute(n,t)}.bind(this);var t=window.location.pathname;this.onroute(t,e)}},{key:"onroute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.routes.find(function(t){return t.match(e)});n&&(this.activeRoute&&this.activeRoute.leave(),this.activeRoute=n,this.activeRoute.navigate(e,t))}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.location.pathname!==e&&(this.history.pushState(t,"",e),this.onroute(e,t))}},{key:"setHistory",value:function(e){this.history=e}},{key:"back",value:function(){this.history.back()}},{key:"forward",value:function(){this.history.forward()}}]),e}();t.default=u},119:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(323),o=r(i);"serviceWorker"in navigator&&navigator.serviceWorker.register(o.default.replace("/index",""),{scope:"/"}).then(function(e){}).catch(function(e){throw Error("ServiceWorker error: "+e)})},120:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(48),c=r(u),l=n(131),f=r(l),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._el=document.querySelector(".js-chat"),n.hide(),n}return a(t,e),s(t,[{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.username||e.email?(this._component=new f.default({el:this._el,data:{messages:[],username:e.username,email:e.email}}),this._component.render(),void this.show()):this.router.go("/")}}]),t}(c.default);t.default=h},121:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(48),l=r(c),f=n(135),h=r(f),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._el=document.querySelector(".js-game"),n.hide(),n}return a(t,e),s(t,[{key:"init",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}},{key:"_initCanvas",value:function(){this.canvas=this._el.querySelector(".js-canvas"),this.canvas.width=this._el.clientWidth+"",this.canvas.height=this._el.clientHeight+""}},{key:"resume",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resume",this).call(this),this._initCanvas(),this._game=new h.default({ctx:this.canvas.getContext("2d"),width:+this.canvas.width,height:+this.canvas.height}),this._game.start()}}]),t}(l.default);t.default=d},122:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(48),c=r(u),l=n(87),f=r(l),h=n(88),d=r(h),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._el=document.querySelector(".js-login"),n.hide(),n._component=new f.default({el:n._el,data:{title:"Login",fields:[{name:"user",type:"text",placeholder:"Ваш логин"},{name:"email",type:"email",placeholder:"Ваш email"}],controls:[{text:"Войти в чат",attrs:{type:"submit"}},{text:"Играть",attrs:{id:"js-play",type:"button"}},{text:"Пользователи",attrs:{id:"js-scores-btn",type:"button"}}]}}),n}return a(t,e),s(t,[{key:"init",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._component.on("submit",function(t){t.preventDefault();var n=e._component.getFormData(),r=new d.default(n.user,n.email);r.signup().then(function(){e.router.go("/chat",r.json)}).catch(console.error)});var t=document.getElementById("js-play");t.addEventListener("click",function(t){t.preventDefault(),e.router.go("/game")});var n=document.getElementById("js-scores-btn");n.addEventListener("click",function(t){t.preventDefault(),e.router.go("/scores")})}}]),t}(c.default);t.default=p},123:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(48),c=r(u),l=n(88),f=r(l),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._el=document.querySelector(".js-scores"),n.hide(),n}return a(t,e),s(t,[{key:"init",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}},{key:"resume",value:function(){var e=this;f.default.fetchAll().then(function(t){e._el.innerHTML="<ul>"+t.map(function(e){return"<li>"+e.username+" - "+e.email+"</li>"}).join("")+"</ul>",e.show()}).catch(function(){e.router.go("/",{})})}}]),t}(c.default);t.default=h},127:function(e,t){},128:function(e,t){e.exports=function(e){"use strict";function t(e){l(e+'\nin block "'+m+'" at line: '+b+"\nfile: "+_)}function n(e,t,n){if(n)for(var r in t)"function"==typeof t[r]&&t[r].param&&(t[r]=t[r]());return e.call(f,t)}var r,i,o,a,s,u,c,l,f=this,h="",d=[],p=[],v="",y={},_="",b="",m="",g=/[&<>"]/g,w=/[&<>"]/,k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},O=function(e){return"string"==typeof e&&w.test(e)?e.replace(g,j):null==e?"":e},j=function(e){return k[e]};f&&"function"==typeof f.i18n?f.i18n:function(e){return e};l="undefined"==typeof __fest_error?"undefined"!=typeof console&&console.error?function(){return Function.prototype.apply.call(console.error,console,arguments)}:function(){}:__fest_error;var P=e;y.chat=function(e){var n="";n+='<h3 class="js-title">Ты в чате, ';try{n+=O(e.username)}catch(e){t(e.message+"4")}return n+='!</h3><div class="js-messages chat"><div class="cssload-wrap"><div class="cssload-cssload-spinner"></div></div></div><div class="js-chat-form"></div>'},y.chat__messages=function(e){var n,r,i,o,a="";try{o=e||[],i=o.length}catch(e){o=[],i=0,t(e.message)}for(n=0;n<i;n++){r=o[n];try{p[0]=O(r.isMy?" chat__message_my":"")}catch(e){p[0]="",t(e.message)}try{p[1]=O(r.background)}catch(e){p[1]="",t(e.message)}a+='<div class="chat__message '+p[0]+'" style="background: #'+p[1]+'">';try{a+=O(r.message)}catch(e){t(e.message+"17")}a+='<div class="chat__email">';try{a+=O(r.email)}catch(e){t(e.message+"19")}a+="</div></div>"}return a};try{o=P.block}catch(e){o=!1,t(e.message)}if(o){try{i=P.block}catch(e){i="",t(e.message)}c={};try{c=P.data}catch(e){t(e.message)}d.push(h,{name:i,params:c,cp:!1}),h=""}else{i="chat",c={};try{c=P}catch(e){t(e.message)}d.push(h,{name:i,params:c,cp:!1}),h=""}if(s=d.length){for(a=0;a<s;a++)r=d[a],"string"==typeof r?v+=r:(u=y[r.name],u&&(v+=n(u,r.params,r.cp)));return v+h}return h}},129:function(e,t){e.exports=function(e){"use strict";function t(e){s(e+'\nin block "'+y+'" at line: '+v+"\nfile: "+p)}function n(e,t,n){if(n)for(var r in t)"function"==typeof t[r]&&t[r].param&&(t[r]=t[r]());return e.call(u,t)}var r,i,o,a,s,u=this,c="",l=[],f=[],h="",d={},p="",v="",y="",_=/[&<>"]/g,b=/[&<>"]/,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},g=function(e){return"string"==typeof e&&b.test(e)?e.replace(_,w):null==e?"":e},w=function(e){return m[e]};u&&"function"==typeof u.i18n?u.i18n:function(e){return e};s="undefined"==typeof __fest_error?"undefined"!=typeof console&&console.error?function(){return Function.prototype.apply.call(console.error,console,arguments)}:function(){}:__fest_error;var k=e;c+="<form><h1>";try{c+=g(k.title)}catch(e){t(e.message+"3")}c+="</h1><div>";var O,j,P,x;try{x=k.fields||[],P=x.length}catch(e){x=[],P=0,t(e.message)}for(O=0;O<P;O++){j=x[O];try{f[0]=g(j.name)}catch(e){f[0]="",t(e.message)}try{f[1]=g(j.placeholder)}catch(e){f[1]="",t(e.message)}c+='<input type="text" name="'+f[0]+'" placeholder="'+f[1]+'"/>'}if(c+='</div><div class="js-controls"></div></form>',o=l.length){for(i=0;i<o;i++)r=l[i],"string"==typeof r?h+=r:(a=d[r.name],a&&(h+=n(a,r.params,r.cp)));return h+c}return c}},130:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(60),u=r(s);n(321);var c=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"button",e));return n._el.classList.add("button"),n._el.innerText=n._options.text||"Press me",n}return a(t,e),t}(u.default);t.default=c},131:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(322);var u=n(60),c=r(u),l=n(87),f=r(l),h=n(136),d=r(h),p=n(128),v=r(p),y=function(e){function t(e){var n=e.data,r=void 0===n?{messages:[],username:"",email:""}:n,a=e.el;i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"form"));return s.template=v.default,s.data=r,s._el=a,s.messagesModel=new d.default(s._updateMessages.bind(s)),s.init(),s.render(),s}return a(t,e),s(t,[{key:"init",value:function(){this._updateHtml(),this.form=new f.default({el:this._el.querySelector(".js-chat-form"),data:{fields:[{name:"message",type:"text",placeholder:"Ваше сообщение"}],controls:[{text:"Отправить",attrs:{type:"submit"}}]}}),this.form.on("submit",this._sendMessage.bind(this))}},{key:"render",value:function(){this._renderMessages(),this._renderForm()}},{key:"set",value:function(e){return this.data=Object.assign({},this.data,e),this.render()}},{key:"subscribe",value:function(e){this.messagesModel.addNewMessageListener(e)}},{key:"_sendMessage",value:function(e){e.preventDefault();var t=this.form.getFormData().message;this.form.reset(),this.messagesModel.sendMessage(t)}},{key:"_updateHtml",value:function(){this.data.username=this.data.username||this.data.user||"Anon",this._el.innerHTML=this.template(this.data)}},{key:"_renderMessages",value:function(e){var t=this._el.querySelector(".js-messages");t.innerHTML=this.template({block:"chat__messages",data:e}),t.scrollTop=t.scrollHeight}},{key:"_renderForm",value:function(){this.form.render()}},{key:"_updateMessages",value:function(e){var t=this;e=e.map(function(e){return e.isMy=e.email===t.data.email,e}),this._renderMessages(e)}}]),t}(c.default);t.default=y},132:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){var r=t.x,i=void 0===r?100:r,o=t.y,a=void 0===o?100:o,s=t.r,u=void 0===s?40:s,c=t.color,l=void 0===c?"#0095DD":c,f=t.vx,h=void 0===f?0:f,d=t.vy,p=void 0===d?0:d;n(this,e),this.vx=h,this.vy=p,this.r=u,this.x=i,this.y=a,this.color=l}return r(e,[{key:"dv",value:function(e){var t=e.vx,n=void 0===t?0:t,r=e.vy,i=void 0===r?0:r;this.vx+=n,this.vy+=i}},{key:"update",value:function(e){this.x+=this.vx*e,this.y+=this.vy*e}},{key:"checkRectangleIntersection",value:function(e){var t=e.width,n=e.height,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"relect",i={};(this.x+this.r>t||this.x-this.r<0)&&(i.x=!0),(this.y+this.r>n||this.y-this.r<0)&&(i.y=!0),this[r](i)}},{key:"destroy",value:function(e){(e.x||e.y)&&(this.toDestroy=!0)}},{key:"reflect",value:function(e){var t=this;Object.keys(e).forEach(function(n){e[n]&&(t["v"+n]*=-1)})}},{key:"draw",value:function(e){e.beginPath(),e.arc(this.x,this.y,this.r,0,2*Math.PI),e.fillStyle=this.color,e.fill(),e.closePath()}}]),e}();t.default=i},133:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this.keys={},this._onPress=this._keyHandler.bind(this,"press"),this._onUp=this._keyHandler.bind(this,"up")}return r(e,[{key:"init",value:function(){document.addEventListener("keydown",this._onPress),document.addEventListener("keyup",this._onUp)}},{key:"destroy",value:function(){document.removeEventListener("keydown",this._onPress),document.removeEventListener("keyup",this._onUp)}},{key:"is",value:function(e){return this.keys[e]}},{key:"_keyHandler",value:function(e,t){this.keys[t.key]="press"===e}}]),e}();t.default=i},134:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){n(this,e)};t.default=r},135:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(132),s=r(a),u=n(134),c=(r(u),n(133)),l=r(c),f=function(){function e(t){var n=t.ctx,r=t.width,o=t.height;i(this,e),this.ctx=n,this.width=r,this.height=o,this.ball=new s.default({}),this.readyToShot=!0,this.bullets=[],this.key=new l.default}return o(e,[{key:"start",value:function(){this._stopped=!1,this.key.init(),this.startLoop()}},{key:"isStopped",value:function(){return this._stopped}},{key:"startLoop",value:function(){function e(){var i=Date.now(),o=i-(t||i);t=i,n()||requestAnimationFrame(e),r(o)}var t=void 0,n=this.isStopped.bind(this),r=this.exec.bind(this);e()}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"exec",value:function(e){var t=this;this.keys;this.clear(),this.bullets.forEach(function(n){n.update(e),n.checkRectangleIntersection({width:t.width,height:t.height},"destroy"),n.draw(t.ctx)}),this.ball.update(e),this.checkControl(),this.ball.checkRectangleIntersection({width:this.width,height:this.height},"reflect"),this.ball.draw(this.ctx),this.collectGarbage()}},{key:"collectGarbage",value:function(){this.bullets.forEach(function(e,t,n){e.toDestroy&&n.splice(t,1)})}},{key:"createBullet",value:function(){var e=this;this.readyToShot&&(this.readyToShot=!1,this.bullets.push(new s.default({color:"#000000",r:10,x:this.ball.x,y:this.ball.y,vx:5*this.ball.vx,vy:5*this.ball.vy})),setTimeout(function(){return e.readyToShot=!0},300))}},{key:"checkControl",value:function(){this.key.is("w")&&this.ball.dv({vy:-.01}),this.key.is("s")&&this.ball.dv({vy:.01}),this.key.is("d")&&this.ball.dv({vx:.01}),this.key.is("a")&&this.ball.dv({vx:-.01}),this.key.is(" ")&&this.createBullet()}}]),e}();t.default=f},136:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e);var r="https:"===window.location.protocol?"wss:":"ws:",i=r+"//"+location.host+"/ws/messages";this.addNewMessageListener(t),this.ws=new WebSocket(i),this.ws.onopen=function(){var e=this;this.ws.onmessage=function(e){var t=e.data,n=JSON.parse(t);this.callback&&this.callback(n)}.bind(this),setInterval(function(){e.ws.send("")},1e4)}.bind(this)}return r(e,[{key:"sendMessage",value:function(e){this.ws.send(JSON.stringify({text:e}))}},{key:"addNewMessageListener",value:function(e){this.callback=e}}]),e}();t.default=i},137:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=e.split("/").filter(function(e){return e}).map(function(e){return/^:/.exec(e)?(t.push(e.slice(1)),RegExp("^/([^/]+)","i")):RegExp("^/"+e,"i")});return function(e){var r=[],i=n.every(function(t,n){var i=t.exec(e);return!!i&&(2===i.length&&r.push(i[1]),e=e.replace(t,""),!0)});return i?r.reduce(function(e,n,r){return e[t[r]]=n,e},{}):null}}},138:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(137),s=r(a),u=0,c=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.pathToRegex=s.default,this.id="p"+u,u++,this.pathname=t,this.regex=this.pathToRegex(t),this.View=n,this.options=r}return o(e,[{key:"match",value:function(e){return!!this.regex(e)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||{};var n=this.regex(e);if(!this._view){var r=new this.View(this.options);r.init(this.options),r.setRouter(this.__router),this._view=r}this._view.resume(Object.assign(t,n))}},{key:"leave",value:function(){this._view&&this._view.pause()}},{key:"setRouter",value:function(e){this.__router=e}}]),e}();t.default=c},321:function(e,t){},322:function(e,t){},323:function(e,t){e.exports="/../index/sw.0fec01839b1fd16fe3de3007d0e3f20a.js"},326:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n(119),n(127);var i=n(118),o=r(i),a=n(120),s=r(a),u=n(122),c=r(u),l=n(123),f=r(l),h=n(121),d=r(h);(new o.default).addRoute("/scores",f.default).addRoute("/chat",s.default).addRoute("/game",d.default).addRoute("/",c.default).start()},48:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),t.createElement&&(this.tagName=t.tagName||"div",this._el=document.createElement(this.tagName))}return r(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setAttrs(e.attrs)}},{key:"pause",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hide()}},{key:"resume",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.show()}},{key:"show",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._el&&(this._el.hidden=!1)}},{key:"hide",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._el.hidden=!0}},{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}},{key:"appendTo",value:function(e){e.appendChild(this._el)}},{key:"remove",value:function(){this._el&&this._el.remove()}},{key:"setElement",value:function(e){this._el&&this._el.remove(),this._el=e}},{key:"setAttrs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach(function(n){e._el.setAttribute(n,t[n])})}},{key:"toString",value:function(){return this._el.outerHTML}},{key:"setRouter",value:function(e){this.router=e}}]),e}();t.default=i},60:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this._el=document.createElement(t),this.setAttrs(r.attrs),this._options=r,r.id&&(this._el.id=r.id)}return r(e,[{key:"setAttrs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach(function(n){e._el.setAttribute(n,t[n])})}},{key:"renderTo",value:function(e){e.appendChild(this._el)}},{key:"append",value:function(t){t instanceof e?this._el.appendChild(t._get()):this._el.appendChild(t)}},{key:"on",value:function(e,t){this._el.addEventListener(e,t)}},{key:"stop",value:function(e,t){this._el.removeEventListener(e,t)}},{key:"toString",value:function(){return this._el.outerHTML}},{key:"_get",value:function(){return this._el}}]),e}();t.default=i},87:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(60),c=r(u),l=n(130),f=r(l),h=n(129),d=r(h),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"form"));return n.template=d.default,n.data=e.data,n._el=e.el,n.render(),n}return a(t,e),s(t,[{key:"render",value:function(){this._updateHtml(),this._installControls()}},{key:"reset",value:function(){this._el.querySelector("form").reset()}},{key:"_updateHtml",value:function(){this._el.innerHTML=this.template(this.data)}},{key:"_installControls",value:function(){var e=this,t=this.data.controls,n=void 0===t?[]:t;n.forEach(function(t){var n=new f.default(t);e._el.querySelector(".js-controls").appendChild(n._get())})}},{key:"getFormData",value:function(){var e=this._el.querySelector("form"),t=e.elements,n={};return Object.keys(t).forEach(function(e){var r=t[e].name,i=t[e].value;r&&(n[r]=i)}),n}}]),t}(c.default);t.default=p},88:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){n(this,e),this.username=t,this.email=r}return r(e,[{key:"signup",value:function(){return new Promise(function(e,t){var n=new XMLHttpRequest,r=JSON.stringify({username:this.username,email:this.email});n.open("POST","/api/users",!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=function(){if(4===this.readyState)return 201!==this.status?t(this.statusText):void e(JSON.parse(r))},n.onerror=function(){t()},n.send(r)}.bind(this))}},{key:"json",get:function(){return{username:this.username,email:this.email}}}],[{key:"fetchAll",value:function(){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET","/api/users",!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=function(){if(4===this.readyState)return 200!==this.status?t(this.statusText):void e(JSON.parse(this.responseText))},n.send()})}}]),e}();t.default=i}},[326]);